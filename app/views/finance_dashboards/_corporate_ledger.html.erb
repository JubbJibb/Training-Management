<div class="cfo-dash-section-container">
  <%= odt_section_header title: "Corporate ledger" %>
  <div class="cfo-dash-section-container__body">
  <% if summary[:corporate_ledger_rows].any? %>
    <div class="table-wrap cfo-dash-table-wrap">
      <table class="table data-table cfo-dash-table table-sortable-filterable" aria-label="Corporate ledger">
        <colgroup>
          <col style="width: 18%;">
          <col style="width: 18%;">
          <col style="width: 18%;">
          <col style="width: 14%;">
          <col style="width: 18%; min-width: 95px;">
          <col style="width: 10%;">
        </colgroup>
        <thead>
          <tr>
            <th class="cfo-dash-table-num num"><span class="th-inner">Billed (net)</span></th>
            <th class="cfo-dash-table-num num"><span class="th-inner">Cash</span></th>
            <th class="cfo-dash-table-num num"><span class="th-inner">Outstanding</span></th>
            <th><span class="th-inner">Status</span></th>
            <th><span class="th-inner">Last activity</span></th>
            <th class="icon-col"></th>
          </tr>
        </thead>
        <tbody>
          <% summary[:corporate_ledger_rows].each do |row| %>
            <tr>
              <td class="cfo-dash-table-num num"><%= number_to_thb(row[:total_billed_net]) %></td>
              <td class="cfo-dash-table-num num"><%= number_to_thb(row[:cash_received]) %></td>
              <td class="cfo-dash-table-num num"><%= number_to_thb(row[:outstanding]) %></td>
              <td><%= row[:status] %></td>
              <td class="no-wrap"><%= row[:last_activity]&.strftime("%d/%m/%y %H:%M") || "â€”" %></td>
              <td>
                <button type="button" class="cfo-dash-link" data-bs-toggle="collapse" data-bs-target="#ledger-<%= row[:attendee_ids].first %>">View</button>
              </td>
            </tr>
            <tr class="collapse" id="ledger-<%= row[:attendee_ids].first %>">
              <td colspan="6" class="cfo-dash-ledger-detail">
                <%= render "finance_dashboards/corporate_ledger_detail", row: row %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <p class="cfo-dash-empty">No corporate ledger data.</p>
  <% end %>
  </div>
</div>
