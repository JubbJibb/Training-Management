<%# Section 4: Documents & Payment %>
<%= odt_card(title: "Documents & Payment", icon: "file-earmark-text", extra_class: "attendee-edit-card mb-4") do %>
  <div class="row g-3 mb-3">
      <div class="col-md-6">
        <%= f.label :payment_status, "สถานะชำระเงิน", class: "form-label" %>
        <%= f.select :payment_status, [["Pending", "Pending"], ["Paid", "Paid"]], 
            { selected: @attendee.payment_status || "Pending" }, 
            { class: "form-select form-control-odt" } %>
      </div>
      <div class="col-md-6">
        <%= f.label :document_status, "สถานะเอกสาร", class: "form-label" %>
        <%= f.select :document_status, [["", ""], ["QT", "QT"], ["INV", "INV"], ["Receipt", "Receipt"]], 
            { selected: @attendee.document_status }, 
            { class: "form-select form-control-odt" } %>
      </div>
    </div>
    <div class="row g-3 mb-3">
      <div class="col-md-4">
        <%= f.label :quotation_no, "Quotation No.", class: "form-label" %>
        <%= f.text_field :quotation_no, class: "form-control form-control-odt", placeholder: "e.g. QT-2026-001" %>
      </div>
      <div class="col-md-4">
        <%= f.label :invoice_no, "Invoice No.", class: "form-label" %>
        <%= f.text_field :invoice_no, class: "form-control form-control-odt", placeholder: "e.g. INV-2026-001" %>
      </div>
      <div class="col-md-4">
        <%= f.label :receipt_no, "Receipt No.", class: "form-label" %>
        <%= f.text_field :receipt_no, class: "form-control form-control-odt", placeholder: "e.g. RCP-2026-001" %>
      </div>
    </div>
    <div class="row g-3 mb-3">
      <div class="col-md-6">
        <%= f.label :due_date, "Due Date", class: "form-label" %>
        <%= f.date_field :due_date, class: "form-control form-control-odt" %>
      </div>
    </div>
    <div class="mb-3">
      <%= f.label :payment_slips, "สลิปการโอนเงิน (Payment Slips)", class: "form-label" %>
      <div class="attendee-edit-dropzone">
        <label class="attendee-edit-dropzone__area">
          <%= f.file_field :payment_slips, class: "attendee-edit-dropzone__input", accept: "image/*,.pdf", multiple: true %>
          <% if @attendee.payment_slips.attached? %>
            <div class="attendee-edit-dropzone__preview">
              <% @attendee.payment_slips.each do |slip| %>
                <div class="d-flex align-items-center gap-2 mb-2">
                  <% if slip.image? %>
                    <%= image_tag slip, class: "attendee-edit-dropzone__thumb" %>
                  <% else %>
                    <i class="bi bi-file-earmark-pdf attendee-edit-dropzone__pdf-icon"></i>
                  <% end %>
                  <div>
                    <p class="mb-0 small"><strong><%= slip.filename %></strong> <small class="text-muted">(<%= number_to_human_size(slip.byte_size) %>)</small></p>
                    <%= link_to "ดูไฟล์", rails_blob_path(slip, disposition: "inline"), target: "_blank", class: "btn btn-sm btn-outline-primary me-1" %>
                    <%= link_to "ดาวน์โหลด", rails_blob_path(slip, disposition: "attachment"), class: "btn btn-sm btn-outline-secondary" %>
                  </div>
                </div>
              <% end %>
            </div>
          <% else %>
            <div class="attendee-edit-dropzone__placeholder">
              <i class="bi bi-cloud-arrow-up attendee-edit-dropzone__icon"></i>
              <span>คลิกหรือลากไฟล์มาวาง (ได้หลายไฟล์)</span>
              <small class="text-muted d-block mt-1">JPG, PNG, GIF, PDF (ไม่เกิน 10MB ต่อไฟล์)</small>
            </div>
          <% end %>
        </label>
      </div>
      <small class="form-text text-muted">รองรับหลายไฟล์: JPG, PNG, GIF, PDF (ขนาดไม่เกิน 10MB ต่อไฟล์)</small>
    </div>
    <div>
      <%= f.label :notes, "หมายเหตุ", class: "form-label" %>
      <%= f.text_area :notes, class: "form-control form-control-odt", rows: 3 %>
  </div>
<% end %>
